{"version":3,"sources":["webpack:/webpack/universalModuleDefinition","postal.xframe.js","webpack:/webpack/bootstrap 651a4bee1487dcac605a","webpack:/src/index.js","webpack:/external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}","webpack:/external \"postal\"","webpack:/src/utils.js","webpack:/src/state.js","webpack:/src/XFrameClient.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","listener","plugin","routeMessage","apply","arguments","listenToWorker","worker","_","include","state","workers","addEventListener","push","_interopRequire","obj","__esModule","postal","_utils","_memoRemoteByInstanceId","_memoRemoteByTarget","_disconnectClient","safeSerialize","_state","env","XFrameClient","getInstance","source","origin","instanceId","client","isWorker","Worker","options","target","NO_OP","fedx","transports","xframe","eagerSerialize","useEagerSerialize","configure","cfg","config","defaults","extend","clearConfiguration","getTargets","postMessage","targets","map","document","getElementsByTagName","i","urlHack","createElement","href","src","protocol","host","contentWindow","defaultOriginUrl","window","parent","concat","remotes","wrapForTransport","packingSlip","JSON","stringify","unwrapFromTransport","msgData","indexOf","parse","ex","event","currentTarget","parsed","data","remote","find","x","onMessage","sendMessage","envelope","cloneDeep","each","disconnect","clients","reduce","isArray","doNotNotify","without","signalReady","callback","length","def","sendPing","eventName","handler","bubble","Error","stopListeningToWorker","removeEventListener","pop","memo","proxy","tgt","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","entries","Symbol","iterator","next","done","_step$value","_slicedToArray","value","key","val","isPlainObject","err","arr","Array","Object","_arr","TypeError","defineProperty","regeneratorRuntime","mark","k","wrap","context$1$0","prev","keys","t0","finish","stop","location","test","navigator","userAgent","allowedOrigins","enabled","_createClass","defineProperties","props","prop","configurable","writable","Constructor","protoProps","staticProps","prototype","_get","get","object","property","receiver","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","_inherits","subClass","superClass","create","constructor","enumerable","__proto__","_classCallCheck","instance","_postal$fedx$FederationClient","_len","args","_key","transportName","shouldProcess","hasDomainFilters","contains","send","context","FederationClient"],"mappings":"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","file":"postal.xframe.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"postal\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"postal\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"postalXframe\"] = factory(require(\"lodash\"), require(\"postal\"));\n\telse\n\t\troot[\"postalXframe\"] = factory(root[\"_\"], root[\"postal\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","/*!\n *  * postal.xframe - postal.js/postal.federation plugin for federating instances of postal.js across iframe/window boundaries.\n *  * Author: Jim Cowart (http://ifandelse.com)\n *  * Version: v0.5.0\n *  * Url: http://github.com/postaljs/postal.xframe\n *  * License(s): (MIT OR GPL-2.0)\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"postal\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"postal\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"postalXframe\"] = factory(require(\"lodash\"), require(\"postal\"));\n\telse\n\t\troot[\"postalXframe\"] = factory(root[\"_\"], root[\"postal\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tvar postal = _interopRequire(__webpack_require__(2));\n\t\n\tvar _utils = __webpack_require__(3);\n\t\n\tvar _memoRemoteByInstanceId = _utils._memoRemoteByInstanceId;\n\tvar _memoRemoteByTarget = _utils._memoRemoteByTarget;\n\tvar _disconnectClient = _utils._disconnectClient;\n\tvar safeSerialize = _utils.safeSerialize;\n\t\n\tvar _state = __webpack_require__(4);\n\t\n\tvar state = _state.state;\n\tvar env = _state.env;\n\t\n\tvar XFrameClient = _interopRequire(__webpack_require__(5));\n\t\n\tfunction listener() {\n\t\tplugin.routeMessage.apply(plugin, arguments);\n\t}\n\t\n\tfunction listenToWorker(worker) {\n\t\tif (!_.include(state.workers, worker)) {\n\t\t\tworker.addEventListener(\"message\", listener);\n\t\t\tstate.workers.push(worker);\n\t\t}\n\t}\n\t\n\tXFrameClient.getInstance = function getInstance(source, origin, instanceId) {\n\t\tvar client = new XFrameClient(source, {\n\t\t\torigin: origin,\n\t\t\tisWorker: typeof Worker !== \"undefined\" && source instanceof Worker\n\t\t}, instanceId);\n\t\tif (client.options.isWorker) {\n\t\t\tlistenToWorker(client.target);\n\t\t}\n\t\treturn client;\n\t};\n\t\n\tvar NO_OP = function NO_OP() {};\n\t\n\tvar plugin = postal.fedx.transports.xframe = {\n\t\teagerSerialize: env.useEagerSerialize,\n\t\tXFrameClient: XFrameClient,\n\t\tconfigure: function configure(cfg) {\n\t\t\tif (cfg) {\n\t\t\t\tstate.config = _.defaults(_.extend(state.config, cfg), state.defaults);\n\t\t\t}\n\t\t\treturn state.config;\n\t\t},\n\t\tclearConfiguration: function clearConfiguration() {\n\t\t\tstate.config = _.extend({}, state.defaults);\n\t\t},\n\t\t//find all iFrames and the parent window if in an iframe\n\t\tgetTargets: env.isWorker ? function () {\n\t\t\treturn [{\n\t\t\t\ttarget: {\n\t\t\t\t\tpostMessage: postMessage\n\t\t\t\t}\n\t\t\t}]; // TO-DO: look into this...\n\t\t} : function () {\n\t\t\tvar targets = _.map(document.getElementsByTagName(\"iframe\"), function (i) {\n\t\t\t\tvar urlHack = document.createElement(\"a\");\n\t\t\t\turlHack.href = i.src;\n\t\t\t\tvar origin = urlHack.protocol + \"//\" + urlHack.host;\n\t\t\t\t// The following condition fixes the IE issue of setting the origin while the iframe is 'empty':\n\t\t\t\t// if the iframe has no 'src' set to some meaningful url (at this very moment),\n\t\t\t\t// then the urlHack returns neither protocol nor host information.\n\t\t\t\tif (origin === \"//\") {\n\t\t\t\t\torigin = null;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\ttarget: i.contentWindow,\n\t\t\t\t\torigin: origin || state.config.defaultOriginUrl\n\t\t\t\t};\n\t\t\t});\n\t\t\tif (window.parent && window.parent !== window) {\n\t\t\t\ttargets.push({\n\t\t\t\t\ttarget: window.parent,\n\t\t\t\t\torigin: \"*\"\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn targets.concat(state.workers);\n\t\t},\n\t\tremotes: [],\n\t\twrapForTransport: env.useEagerSerialize ? function (packingSlip) {\n\t\t\treturn JSON.stringify({\n\t\t\t\tpostal: true,\n\t\t\t\tpackingSlip: packingSlip\n\t\t\t});\n\t\t} : function (packingSlip) {\n\t\t\treturn {\n\t\t\t\tpostal: true,\n\t\t\t\tpackingSlip: packingSlip\n\t\t\t};\n\t\t},\n\t\tunwrapFromTransport: function unwrapFromTransport(msgData) {\n\t\t\tif (typeof msgData === \"string\" && (env.useEagerSerialize || msgData.indexOf(\"\\\"postal\\\":true\") !== -1)) {\n\t\t\t\ttry {\n\t\t\t\t\treturn JSON.parse(msgData);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn msgData;\n\t\t\t}\n\t\t},\n\t\trouteMessage: function routeMessage(event) {\n\t\t\t// source = remote window or worker?\n\t\t\tvar source = event.source || event.currentTarget;\n\t\t\tvar parsed = this.unwrapFromTransport(event.data);\n\t\t\tif (parsed.postal) {\n\t\t\t\tvar remote = _.find(this.remotes, function (x) {\n\t\t\t\t\treturn x.target === source;\n\t\t\t\t});\n\t\t\t\tif (!remote) {\n\t\t\t\t\tremote = XFrameClient.getInstance(source, event.origin, parsed.packingSlip.instanceId);\n\t\t\t\t\tthis.remotes.push(remote);\n\t\t\t\t}\n\t\t\t\tremote.onMessage(parsed.packingSlip);\n\t\t\t}\n\t\t},\n\t\tsendMessage: function sendMessage(env) {\n\t\t\tvar envelope = env;\n\t\t\tif (state.config.safeSerialize) {\n\t\t\t\tenvelope = safeSerialize(_.cloneDeep(env));\n\t\t\t}\n\t\t\t_.each(this.remotes, function (remote) {\n\t\t\t\tremote.sendMessage(envelope);\n\t\t\t});\n\t\t},\n\t\tdisconnect: function disconnect(options) {\n\t\t\toptions = options || {};\n\t\t\tvar clients = options.instanceId ?\n\t\t\t// an instanceId value or array was provided, let's get the client proxy instances for the id(s)\n\t\t\t_.reduce(_.isArray(options.instanceId) ? options.instanceId : [options.instanceId], _memoRemoteByInstanceId, [], this) :\n\t\t\t// Ok so we don't have instanceId(s), let's try target(s)\n\t\t\toptions.target ?\n\t\t\t// Ok, so we have a targets array, we need to iterate over it and get a list of the proxy/client instances\n\t\t\t_.reduce(_.isArray(options.target) ? options.target : [options.target], _memoRemoteByTarget, [], this) :\n\t\t\t// aww, heck - we don't have instanceId(s) or target(s), so it's ALL THE REMOTES\n\t\t\tthis.remotes;\n\t\t\tif (!options.doNotNotify) {\n\t\t\t\t_.each(clients, _disconnectClient, this);\n\t\t\t}\n\t\t\tthis.remotes = _.without.apply(null, [this.remotes].concat(clients));\n\t\t},\n\t\tsignalReady: function signalReady(targets, callback) {\n\t\t\ttargets = _.isArray(targets) ? targets : [targets];\n\t\t\ttargets = targets.length ? targets : this.getTargets();\n\t\t\tcallback = callback || NO_OP;\n\t\t\t_.each(targets, function (def) {\n\t\t\t\tif (def.target) {\n\t\t\t\t\tdef.origin = def.origin || state.config.defaultOriginUrl;\n\t\t\t\t\tvar remote = _.find(this.remotes, function (x) {\n\t\t\t\t\t\treturn x.target === def.target;\n\t\t\t\t\t});\n\t\t\t\t\tif (!remote) {\n\t\t\t\t\t\tremote = XFrameClient.getInstance(def.target, def.origin);\n\t\t\t\t\t\tthis.remotes.push(remote);\n\t\t\t\t\t}\n\t\t\t\t\tremote.sendPing(callback);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\t\taddEventListener: env.isWorker ? function () {\n\t\t\taddEventListener(\"message\", listener);\n\t\t} : function (eventName, handler, bubble) {\n\t\t\t// in normal browser context\n\t\t\tif (typeof window !== \"undefined\" && typeof window.addEventListener === \"function\") {\n\t\t\t\twindow.addEventListener(eventName, handler, bubble);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"postal.xframe only works with browsers that support window.addEventListener\");\n\t\t\t}\n\t\t},\n\t\tlistenToWorker: listenToWorker,\n\t\tstopListeningToWorker: function stopListeningToWorker(worker) {\n\t\t\tif (worker) {\n\t\t\t\tworker.removeEventListener(\"message\", listener);\n\t\t\t\tstate.workers = _.without(state.workers, worker);\n\t\t\t} else {\n\t\t\t\twhile (state.workers.length) {\n\t\t\t\t\tstate.workers.pop().removeEventListener(\"message\", listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\tplugin.addEventListener(\"message\", listener, false);\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\t// istanbul ignore next\n\t\n\tvar _slicedToArray = function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) { _arr.push(_step.value); if (i && _arr.length === i) break; } return _arr; } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } };\n\t\n\texports._memoRemoteByInstanceId = _memoRemoteByInstanceId;\n\texports._memoRemoteByTarget = _memoRemoteByTarget;\n\texports._disconnectClient = _disconnectClient;\n\texports.safeSerialize = safeSerialize;\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tfunction _memoRemoteByInstanceId(memo, instanceId) {\n\t\tvar proxy = _.find(this.remotes, function (x) {\n\t\t\treturn x.instanceId === instanceId;\n\t\t});\n\t\tif (proxy) {\n\t\t\tmemo.push(proxy);\n\t\t}\n\t\treturn memo;\n\t}\n\t\n\tfunction _memoRemoteByTarget(memo, tgt) {\n\t\tvar proxy = _.find(this.remotes, function (x) {\n\t\t\treturn x.target === tgt;\n\t\t});\n\t\tif (proxy) {\n\t\t\tmemo.push(proxy);\n\t\t}\n\t\treturn memo;\n\t}\n\t\n\tfunction _disconnectClient(client) {\n\t\tclient.disconnect();\n\t}\n\t\n\tfunction safeSerialize(envelope) {\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\t\n\t\ttry {\n\t\t\tfor (var _iterator = entries(envelope)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar _step$value = _slicedToArray(_step.value, 2);\n\t\n\t\t\t\tvar key = _step$value[0];\n\t\t\t\tvar val = _step$value[1];\n\t\n\t\t\t\tif (typeof val === \"function\") {\n\t\t\t\t\tdelete envelope[key];\n\t\t\t\t}\n\t\t\t\tif (_.isPlainObject(val)) {\n\t\t\t\t\tsafeSerialize(val);\n\t\t\t\t}\n\t\t\t\tif (_.isArray(val)) {\n\t\t\t\t\t_.each(val, safeSerialize);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator[\"return\"]) {\n\t\t\t\t\t_iterator[\"return\"]();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn envelope;\n\t}\n\t\n\tvar entries = regeneratorRuntime.mark(function entries(obj) {\n\t\tvar _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, k;\n\t\n\t\treturn regeneratorRuntime.wrap(function entries$(context$1$0) {\n\t\t\twhile (1) switch (context$1$0.prev = context$1$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\tif ([\"object\", \"function\"].indexOf(typeof obj) === -1) {\n\t\t\t\t\t\tobj = {};\n\t\t\t\t\t}\n\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\t_didIteratorError = false;\n\t\t\t\t\t_iteratorError = undefined;\n\t\t\t\t\tcontext$1$0.prev = 4;\n\t\t\t\t\t_iterator = Object.keys(obj)[Symbol.iterator]();\n\t\n\t\t\t\tcase 6:\n\t\t\t\t\tif (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n\t\t\t\t\t\tcontext$1$0.next = 13;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tk = _step.value;\n\t\t\t\t\tcontext$1$0.next = 10;\n\t\t\t\t\treturn [k, obj[k]];\n\t\n\t\t\t\tcase 10:\n\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\tcontext$1$0.next = 6;\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 13:\n\t\t\t\t\tcontext$1$0.next = 19;\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 15:\n\t\t\t\t\tcontext$1$0.prev = 15;\n\t\t\t\t\tcontext$1$0.t0 = context$1$0[\"catch\"](4);\n\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t_iteratorError = context$1$0.t0;\n\t\n\t\t\t\tcase 19:\n\t\t\t\t\tcontext$1$0.prev = 19;\n\t\t\t\t\tcontext$1$0.prev = 20;\n\t\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator[\"return\"]) {\n\t\t\t\t\t\t_iterator[\"return\"]();\n\t\t\t\t\t}\n\t\n\t\t\t\tcase 22:\n\t\t\t\t\tcontext$1$0.prev = 22;\n\t\n\t\t\t\t\tif (!_didIteratorError) {\n\t\t\t\t\t\tcontext$1$0.next = 25;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tthrow _iteratorError;\n\t\n\t\t\t\tcase 25:\n\t\t\t\t\treturn context$1$0.finish(22);\n\t\n\t\t\t\tcase 26:\n\t\t\t\t\treturn context$1$0.finish(19);\n\t\n\t\t\t\tcase 27:\n\t\t\t\tcase \"end\":\n\t\t\t\t\treturn context$1$0.stop();\n\t\t\t}\n\t\t}, entries, this, [[4, 15, 19, 27], [20,, 22, 26]]);\n\t});\n\texports.entries = entries;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tvar env = {\n\t\torigin: location.origin || location.protocol + \"//\" + location.host,\n\t\tisWorker: typeof window === \"undefined\" && postMessage && location,\n\t\t// I know, I KNOW. The alternative was very expensive perf & time-wise\n\t\t// so I saved you a perf hit by checking the stinking UA. Sigh.\n\t\t// I sought the opinion of several other devs. We all traveled\n\t\t// to the far east to consult with the wisdom of a monk - turns\n\t\t// out he didn\"t know JavaScript, and our passports were stolen on the\n\t\t// return trip. We stowed away aboard a freighter headed back to the\n\t\t// US and by the time we got back, no one had heard of IE 8 or 9. True story.\n\t\tuseEagerSerialize: /MSIE [8,9]/.test(navigator.userAgent)\n\t};\n\t\n\texports.env = env;\n\tvar defaults = {\n\t\tallowedOrigins: [env.origin],\n\t\tenabled: true,\n\t\tdefaultOriginUrl: \"*\",\n\t\tsafeSerialize: false\n\t};\n\t\n\tvar state = {\n\t\tworkers: [],\n\t\tconfig: _.extend({}, defaults),\n\t\tdefaults: defaults\n\t};\n\texports.state = state;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\t// istanbul ignore next\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\t// istanbul ignore next\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\t// istanbul ignore next\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\t// istanbul ignore next\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar postal = _interopRequire(__webpack_require__(2));\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tvar _state = __webpack_require__(4);\n\t\n\tvar state = _state.state;\n\tvar env = _state.env;\n\t\n\tvar XFrameClient = (function (_postal$fedx$FederationClient) {\n\t\tfunction XFrameClient() {\n\t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\targs[_key] = arguments[_key];\n\t\t\t}\n\t\n\t\t\t_classCallCheck(this, XFrameClient);\n\t\n\t\t\tthis.transportName = \"xframe\";\n\t\t\t_get(Object.getPrototypeOf(XFrameClient.prototype), \"constructor\", this).apply(this, args);\n\t\t}\n\t\n\t\t_inherits(XFrameClient, _postal$fedx$FederationClient);\n\t\n\t\t_createClass(XFrameClient, {\n\t\t\tshouldProcess: {\n\t\t\t\tvalue: function shouldProcess() {\n\t\t\t\t\tvar hasDomainFilters = !!state.config.allowedOrigins.length;\n\t\t\t\t\treturn state.config.enabled && (this.options.origin === \"*\" || (hasDomainFilters && _.contains(state.config.allowedOrigins, this.options.origin) || !hasDomainFilters) || this.options.isWorker && _.contains(state.workers, this.target) ||\n\t\t\t\t\t// we are in a worker\n\t\t\t\t\tenv.isWorker);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsend: {\n\t\t\t\tvalue: function send(packingSlip) {\n\t\t\t\t\tif (this.shouldProcess()) {\n\t\t\t\t\t\tvar context = env.isWorker ? null : this.target;\n\t\t\t\t\t\tvar args = [postal.fedx.transports.xframe.wrapForTransport(packingSlip)];\n\t\t\t\t\t\tif (!this.options.isWorker && !env.isWorker) {\n\t\t\t\t\t\t\targs.push(this.options.origin);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!env.isWorker) {\n\t\t\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\t\t\tthis.target.postMessage(args[0]);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.target.postMessage(args[0], args[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.target.postMessage.apply(context, args);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\treturn XFrameClient;\n\t})(postal.fedx.FederationClient);\n\t\n\tmodule.exports = XFrameClient;\n\t\n\t// another frame/window\n\n\t// worker\n\n/***/ }\n/******/ ])\n});\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA2NTFhNGJlZTE0ODdkY2FjNjA1YSIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcIl9cIixcImNvbW1vbmpzXCI6XCJsb2Rhc2hcIixcImNvbW1vbmpzMlwiOlwibG9kYXNoXCIsXCJhbWRcIjpcImxvZGFzaFwifSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwb3N0YWxcIiIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9YRnJhbWVDbGllbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7S0N0Q08sQ0FBQyx1Q0FBTSxDQUFROztLQUNmLE1BQU0sdUNBQU0sQ0FBUTs7a0NBTXBCLENBQVM7O0tBSmYsdUJBQXVCLFVBQXZCLHVCQUF1QjtLQUN2QixtQkFBbUIsVUFBbkIsbUJBQW1CO0tBQ25CLGlCQUFpQixVQUFqQixpQkFBaUI7S0FDakIsYUFBYSxVQUFiLGFBQWE7O2tDQUVhLENBQVM7O0tBQTNCLEtBQUssVUFBTCxLQUFLO0tBQUUsR0FBRyxVQUFILEdBQUc7O0tBQ1osWUFBWSx1Q0FBTSxDQUFnQjs7QUFFekMsVUFBUyxRQUFRLEdBQUc7QUFD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QUMsV0FBVyxDQUFDLEtBQUssQ0FBRSxPQUFPLEVBQUUsSUFBSSxDQUFFLENBQUM7T0FDL0M7TUFDRDtLQUNEOzs7O1NBbkNtQixZQUFZO0lBQVMsTUFBTSxDQUFDLElBQUksQ0FBQyxnQkFBZ0I7O2tCQUFqRCxZQUFZIiwiZmlsZSI6InBvc3RhbC54ZnJhbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJsb2Rhc2hcIiksIHJlcXVpcmUoXCJwb3N0YWxcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wibG9kYXNoXCIsIFwicG9zdGFsXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInBvc3RhbFhmcmFtZVwiXSA9IGZhY3RvcnkocmVxdWlyZShcImxvZGFzaFwiKSwgcmVxdWlyZShcInBvc3RhbFwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wicG9zdGFsWGZyYW1lXCJdID0gZmFjdG9yeShyb290W1wiX1wiXSwgcm9vdFtcInBvc3RhbFwiXSk7XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzFfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yX18pIHtcbnJldHVybiBcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb25cbiAqKi8iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIDY1MWE0YmVlMTQ4N2RjYWM2MDVhXG4gKiovIiwiaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuaW1wb3J0IHBvc3RhbCBmcm9tIFwicG9zdGFsXCI7XG5pbXBvcnQge1xuXHRfbWVtb1JlbW90ZUJ5SW5zdGFuY2VJZCxcblx0X21lbW9SZW1vdGVCeVRhcmdldCxcblx0X2Rpc2Nvbm5lY3RDbGllbnQsXG5cdHNhZmVTZXJpYWxpemVcbn0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IHN0YXRlLCBlbnYgfSBmcm9tIFwiLi9zdGF0ZVwiO1xuaW1wb3J0IFhGcmFtZUNsaWVudCBmcm9tIFwiLi9YRnJhbWVDbGllbnRcIjtcblxuZnVuY3Rpb24gbGlzdGVuZXIoKSB7XG5cdHBsdWdpbi5yb3V0ZU1lc3NhZ2UuYXBwbHkoIHBsdWdpbiwgYXJndW1lbnRzICk7XG59XG5cbmZ1bmN0aW9uIGxpc3RlblRvV29ya2VyKCB3b3JrZXIgKSB7XG5cdGlmICggIV8uaW5jbHVkZSggc3RhdGUud29ya2Vycywgd29ya2VyICkgKSB7XG5cdFx0d29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoIFwibWVzc2FnZVwiLCBsaXN0ZW5lciApO1xuXHRcdHN0YXRlLndvcmtlcnMucHVzaCggd29ya2VyICk7XG5cdH1cbn1cblxuWEZyYW1lQ2xpZW50LmdldEluc3RhbmNlID0gZnVuY3Rpb24gZ2V0SW5zdGFuY2UoIHNvdXJjZSwgb3JpZ2luLCBpbnN0YW5jZUlkICkge1xuXHRjb25zdCBjbGllbnQgPSBuZXcgWEZyYW1lQ2xpZW50KCBzb3VyY2UsIHtcblx0XHRvcmlnaW46IG9yaWdpbixcblx0XHRpc1dvcmtlcjogKCB0eXBlb2YgV29ya2VyICE9PSBcInVuZGVmaW5lZFwiICYmIHNvdXJjZSBpbnN0YW5jZW9mIFdvcmtlciApXG5cdH0sIGluc3RhbmNlSWQgKTtcblx0aWYgKCBjbGllbnQub3B0aW9ucy5pc1dvcmtlciApIHtcblx0XHRsaXN0ZW5Ub1dvcmtlciggY2xpZW50LnRhcmdldCApO1xuXHR9XG5cdHJldHVybiBjbGllbnQ7XG59O1xuXG5jb25zdCBOT19PUCA9IGZ1bmN0aW9uKCkge307XG5cbmNvbnN0IHBsdWdpbiA9IHBvc3RhbC5mZWR4LnRyYW5zcG9ydHMueGZyYW1lID0ge1xuXHRlYWdlclNlcmlhbGl6ZTogZW52LnVzZUVhZ2VyU2VyaWFsaXplLFxuXHRYRnJhbWVDbGllbnQ6IFhGcmFtZUNsaWVudCxcblx0Y29uZmlndXJlOiBmdW5jdGlvbiggY2ZnICkge1xuXHRcdGlmICggY2ZnICkge1xuXHRcdFx0c3RhdGUuY29uZmlnID0gXy5kZWZhdWx0cyggXy5leHRlbmQoIHN0YXRlLmNvbmZpZywgY2ZnICksIHN0YXRlLmRlZmF1bHRzICk7XG5cdFx0fVxuXHRcdHJldHVybiBzdGF0ZS5jb25maWc7XG5cdH0sXG5cdGNsZWFyQ29uZmlndXJhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0c3RhdGUuY29uZmlnID0gXy5leHRlbmQoIHt9LCBzdGF0ZS5kZWZhdWx0cyApO1xuXHR9LFxuXHQvL2ZpbmQgYWxsIGlGcmFtZXMgYW5kIHRoZSBwYXJlbnQgd2luZG93IGlmIGluIGFuIGlmcmFtZVxuXHRnZXRUYXJnZXRzOiBlbnYuaXNXb3JrZXIgPyBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gWyB7XG5cdFx0XHR0YXJnZXQ6IHtcblx0XHRcdFx0cG9zdE1lc3NhZ2U6IHBvc3RNZXNzYWdlXG5cdFx0XHR9XG5cdFx0fSBdOyAvLyBUTy1ETzogbG9vayBpbnRvIHRoaXMuLi5cblx0fSA6IGZ1bmN0aW9uKCkge1xuXHRcdGNvbnN0IHRhcmdldHMgPSBfLm1hcCggZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwiaWZyYW1lXCIgKSwgZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHR2YXIgdXJsSGFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cdFx0XHR1cmxIYWNrLmhyZWYgPSBpLnNyYztcblx0XHRcdGxldCBvcmlnaW4gPSB1cmxIYWNrLnByb3RvY29sICsgXCIvL1wiICsgdXJsSGFjay5ob3N0O1xuXHRcdFx0Ly8gVGhlIGZvbGxvd2luZyBjb25kaXRpb24gZml4ZXMgdGhlIElFIGlzc3VlIG9mIHNldHRpbmcgdGhlIG9yaWdpbiB3aGlsZSB0aGUgaWZyYW1lIGlzICdlbXB0eSc6XG5cdFx0XHQvLyBpZiB0aGUgaWZyYW1lIGhhcyBubyAnc3JjJyBzZXQgdG8gc29tZSBtZWFuaW5nZnVsIHVybCAoYXQgdGhpcyB2ZXJ5IG1vbWVudCksXG5cdFx0XHQvLyB0aGVuIHRoZSB1cmxIYWNrIHJldHVybnMgbmVpdGhlciBwcm90b2NvbCBub3IgaG9zdCBpbmZvcm1hdGlvbi5cblx0XHRcdGlmICggb3JpZ2luID09PSBcIi8vXCIgKSB7XG5cdFx0XHRcdG9yaWdpbiA9IG51bGw7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0YXJnZXQ6IGkuY29udGVudFdpbmRvdyxcblx0XHRcdFx0b3JpZ2luOiBvcmlnaW4gfHwgc3RhdGUuY29uZmlnLmRlZmF1bHRPcmlnaW5Vcmxcblx0XHRcdH07XG5cdFx0fSApO1xuXHRcdGlmICggd2luZG93LnBhcmVudCAmJiB3aW5kb3cucGFyZW50ICE9PSB3aW5kb3cgKSB7XG5cdFx0XHR0YXJnZXRzLnB1c2goIHtcblx0XHRcdFx0dGFyZ2V0OiB3aW5kb3cucGFyZW50LFxuXHRcdFx0XHRvcmlnaW46IFwiKlwiXG5cdFx0XHR9ICk7XG5cdFx0fVxuXHRcdHJldHVybiB0YXJnZXRzLmNvbmNhdCggc3RhdGUud29ya2VycyApO1xuXHR9LFxuXHRyZW1vdGVzOiBbXSxcblx0d3JhcEZvclRyYW5zcG9ydDogZW52LnVzZUVhZ2VyU2VyaWFsaXplID8gZnVuY3Rpb24oIHBhY2tpbmdTbGlwICkge1xuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeSgge1xuXHRcdFx0cG9zdGFsOiB0cnVlLFxuXHRcdFx0cGFja2luZ1NsaXA6IHBhY2tpbmdTbGlwXG5cdFx0fSApO1xuXHR9IDogZnVuY3Rpb24oIHBhY2tpbmdTbGlwICkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRwb3N0YWw6IHRydWUsXG5cdFx0XHRwYWNraW5nU2xpcDogcGFja2luZ1NsaXBcblx0XHR9O1xuXHR9LFxuXHR1bndyYXBGcm9tVHJhbnNwb3J0OiBmdW5jdGlvbiggbXNnRGF0YSApIHtcblx0XHRpZiAoIHR5cGVvZiBtc2dEYXRhID09PSBcInN0cmluZ1wiICYmICggZW52LnVzZUVhZ2VyU2VyaWFsaXplIHx8IG1zZ0RhdGEuaW5kZXhPZiggJ1wicG9zdGFsXCI6dHJ1ZScgKSAhPT0gLTEgKSApIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHJldHVybiBKU09OLnBhcnNlKCBtc2dEYXRhICk7XG5cdFx0XHR9IGNhdGNoICggZXggKSB7XG5cdFx0XHRcdHJldHVybiB7fTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIG1zZ0RhdGE7XG5cdFx0fVxuXHR9LFxuXHRyb3V0ZU1lc3NhZ2U6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHQvLyBzb3VyY2UgPSByZW1vdGUgd2luZG93IG9yIHdvcmtlcj9cblx0XHRjb25zdCBzb3VyY2UgPSBldmVudC5zb3VyY2UgfHwgZXZlbnQuY3VycmVudFRhcmdldDtcblx0XHRjb25zdCBwYXJzZWQgPSB0aGlzLnVud3JhcEZyb21UcmFuc3BvcnQoIGV2ZW50LmRhdGEgKTtcblx0XHRpZiAoIHBhcnNlZC5wb3N0YWwgKSB7XG5cdFx0XHR2YXIgcmVtb3RlID0gXy5maW5kKCB0aGlzLnJlbW90ZXMsIGZ1bmN0aW9uKCB4ICkge1xuXHRcdFx0XHRyZXR1cm4geC50YXJnZXQgPT09IHNvdXJjZTtcblx0XHRcdH0gKTtcblx0XHRcdGlmICggIXJlbW90ZSApIHtcblx0XHRcdFx0cmVtb3RlID0gWEZyYW1lQ2xpZW50LmdldEluc3RhbmNlKCBzb3VyY2UsIGV2ZW50Lm9yaWdpbiwgcGFyc2VkLnBhY2tpbmdTbGlwLmluc3RhbmNlSWQgKTtcblx0XHRcdFx0dGhpcy5yZW1vdGVzLnB1c2goIHJlbW90ZSApO1xuXHRcdFx0fVxuXHRcdFx0cmVtb3RlLm9uTWVzc2FnZSggcGFyc2VkLnBhY2tpbmdTbGlwICk7XG5cdFx0fVxuXHR9LFxuXHRzZW5kTWVzc2FnZTogZnVuY3Rpb24oIGVudiApIHtcblx0XHRsZXQgZW52ZWxvcGUgPSBlbnY7XG5cdFx0aWYgKCBzdGF0ZS5jb25maWcuc2FmZVNlcmlhbGl6ZSApIHtcblx0XHRcdGVudmVsb3BlID0gc2FmZVNlcmlhbGl6ZSggXy5jbG9uZURlZXAoIGVudiApICk7XG5cdFx0fVxuXHRcdF8uZWFjaCggdGhpcy5yZW1vdGVzLCBmdW5jdGlvbiggcmVtb3RlICkge1xuXHRcdFx0cmVtb3RlLnNlbmRNZXNzYWdlKCBlbnZlbG9wZSApO1xuXHRcdH0gKTtcblx0fSxcblx0ZGlzY29ubmVjdDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0Y29uc3QgY2xpZW50cyA9IG9wdGlvbnMuaW5zdGFuY2VJZCA/XG5cdFx0XHQvLyBhbiBpbnN0YW5jZUlkIHZhbHVlIG9yIGFycmF5IHdhcyBwcm92aWRlZCwgbGV0J3MgZ2V0IHRoZSBjbGllbnQgcHJveHkgaW5zdGFuY2VzIGZvciB0aGUgaWQocylcblx0XHRcdF8ucmVkdWNlKCBfLmlzQXJyYXkoIG9wdGlvbnMuaW5zdGFuY2VJZCApID8gb3B0aW9ucy5pbnN0YW5jZUlkIDogWyBvcHRpb25zLmluc3RhbmNlSWQgXSwgX21lbW9SZW1vdGVCeUluc3RhbmNlSWQsIFtdLCB0aGlzICkgOlxuXHRcdFx0Ly8gT2sgc28gd2UgZG9uJ3QgaGF2ZSBpbnN0YW5jZUlkKHMpLCBsZXQncyB0cnkgdGFyZ2V0KHMpXG5cdFx0XHRvcHRpb25zLnRhcmdldCA/XG5cdFx0XHRcdC8vIE9rLCBzbyB3ZSBoYXZlIGEgdGFyZ2V0cyBhcnJheSwgd2UgbmVlZCB0byBpdGVyYXRlIG92ZXIgaXQgYW5kIGdldCBhIGxpc3Qgb2YgdGhlIHByb3h5L2NsaWVudCBpbnN0YW5jZXNcblx0XHRcdFx0Xy5yZWR1Y2UoIF8uaXNBcnJheSggb3B0aW9ucy50YXJnZXQgKSA/IG9wdGlvbnMudGFyZ2V0IDogWyBvcHRpb25zLnRhcmdldCBdLCBfbWVtb1JlbW90ZUJ5VGFyZ2V0LCBbXSwgdGhpcyApIDpcblx0XHRcdFx0Ly8gYXd3LCBoZWNrIC0gd2UgZG9uJ3QgaGF2ZSBpbnN0YW5jZUlkKHMpIG9yIHRhcmdldChzKSwgc28gaXQncyBBTEwgVEhFIFJFTU9URVNcblx0XHRcdFx0dGhpcy5yZW1vdGVzO1xuXHRcdGlmICggIW9wdGlvbnMuZG9Ob3ROb3RpZnkgKSB7XG5cdFx0XHRfLmVhY2goIGNsaWVudHMsIF9kaXNjb25uZWN0Q2xpZW50LCB0aGlzICk7XG5cdFx0fVxuXHRcdHRoaXMucmVtb3RlcyA9IF8ud2l0aG91dC5hcHBseSggbnVsbCwgWyB0aGlzLnJlbW90ZXMgXS5jb25jYXQoIGNsaWVudHMgKSApO1xuXHR9LFxuXHRzaWduYWxSZWFkeTogZnVuY3Rpb24oIHRhcmdldHMsIGNhbGxiYWNrICkge1xuXHRcdHRhcmdldHMgPSBfLmlzQXJyYXkoIHRhcmdldHMgKSA/IHRhcmdldHMgOiBbIHRhcmdldHMgXTtcblx0XHR0YXJnZXRzID0gdGFyZ2V0cy5sZW5ndGggPyB0YXJnZXRzIDogdGhpcy5nZXRUYXJnZXRzKCk7XG5cdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayB8fCBOT19PUDtcblx0XHRfLmVhY2goIHRhcmdldHMsIGZ1bmN0aW9uKCBkZWYgKSB7XG5cdFx0XHRpZiAoIGRlZi50YXJnZXQgKSB7XG5cdFx0XHRcdGRlZi5vcmlnaW4gPSBkZWYub3JpZ2luIHx8IHN0YXRlLmNvbmZpZy5kZWZhdWx0T3JpZ2luVXJsO1xuXHRcdFx0XHRsZXQgcmVtb3RlID0gXy5maW5kKCB0aGlzLnJlbW90ZXMsIGZ1bmN0aW9uKCB4ICkge1xuXHRcdFx0XHRcdHJldHVybiB4LnRhcmdldCA9PT0gZGVmLnRhcmdldDtcblx0XHRcdFx0fSApO1xuXHRcdFx0XHRpZiAoICFyZW1vdGUgKSB7XG5cdFx0XHRcdFx0cmVtb3RlID0gWEZyYW1lQ2xpZW50LmdldEluc3RhbmNlKCBkZWYudGFyZ2V0LCBkZWYub3JpZ2luICk7XG5cdFx0XHRcdFx0dGhpcy5yZW1vdGVzLnB1c2goIHJlbW90ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJlbW90ZS5zZW5kUGluZyggY2FsbGJhY2sgKTtcblx0XHRcdH1cblx0XHR9LCB0aGlzICk7XG5cdH0sXG5cdGFkZEV2ZW50TGlzdGVuZXI6IGVudi5pc1dvcmtlciA/IGZ1bmN0aW9uKCkge1xuXHRcdGFkZEV2ZW50TGlzdGVuZXIoIFwibWVzc2FnZVwiLCBsaXN0ZW5lciApO1xuXHR9IDogZnVuY3Rpb24oIGV2ZW50TmFtZSwgaGFuZGxlciwgYnViYmxlICkge1xuXHRcdC8vIGluIG5vcm1hbCBicm93c2VyIGNvbnRleHRcblx0XHRpZiAoIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggZXZlbnROYW1lLCBoYW5kbGVyLCBidWJibGUgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCBcInBvc3RhbC54ZnJhbWUgb25seSB3b3JrcyB3aXRoIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lclwiICk7XG5cdFx0fVxuXHR9LFxuXHRsaXN0ZW5Ub1dvcmtlcjogbGlzdGVuVG9Xb3JrZXIsXG5cdHN0b3BMaXN0ZW5pbmdUb1dvcmtlcjogZnVuY3Rpb24oIHdvcmtlciApIHtcblx0XHRpZiAoIHdvcmtlciApIHtcblx0XHRcdHdvcmtlci5yZW1vdmVFdmVudExpc3RlbmVyKCBcIm1lc3NhZ2VcIiwgbGlzdGVuZXIgKTtcblx0XHRcdHN0YXRlLndvcmtlcnMgPSBfLndpdGhvdXQoIHN0YXRlLndvcmtlcnMsIHdvcmtlciApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR3aGlsZSAoIHN0YXRlLndvcmtlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRzdGF0ZS53b3JrZXJzLnBvcCgpLnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwibWVzc2FnZVwiLCBsaXN0ZW5lciApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxucGx1Z2luLmFkZEV2ZW50TGlzdGVuZXIoIFwibWVzc2FnZVwiLCBsaXN0ZW5lciwgZmFsc2UgKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2luZGV4LmpzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzFfXztcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIHtcInJvb3RcIjpcIl9cIixcImNvbW1vbmpzXCI6XCJsb2Rhc2hcIixcImNvbW1vbmpzMlwiOlwibG9kYXNoXCIsXCJhbWRcIjpcImxvZGFzaFwifVxuICoqIG1vZHVsZSBpZCA9IDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yX187XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcInBvc3RhbFwiXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gX21lbW9SZW1vdGVCeUluc3RhbmNlSWQoIG1lbW8sIGluc3RhbmNlSWQgKSB7XG5cdHZhciBwcm94eSA9IF8uZmluZCggdGhpcy5yZW1vdGVzLCBmdW5jdGlvbiggeCApIHtcblx0XHRyZXR1cm4geC5pbnN0YW5jZUlkID09PSBpbnN0YW5jZUlkO1xuXHR9ICk7XG5cdGlmICggcHJveHkgKSB7XG5cdFx0bWVtby5wdXNoKCBwcm94eSApO1xuXHR9XG5cdHJldHVybiBtZW1vO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX21lbW9SZW1vdGVCeVRhcmdldCggbWVtbywgdGd0ICkge1xuXHR2YXIgcHJveHkgPSBfLmZpbmQoIHRoaXMucmVtb3RlcywgZnVuY3Rpb24oIHggKSB7XG5cdFx0cmV0dXJuIHgudGFyZ2V0ID09PSB0Z3Q7XG5cdH0gKTtcblx0aWYgKCBwcm94eSApIHtcblx0XHRtZW1vLnB1c2goIHByb3h5ICk7XG5cdH1cblx0cmV0dXJuIG1lbW87XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBfZGlzY29ubmVjdENsaWVudCggY2xpZW50ICkge1xuXHRjbGllbnQuZGlzY29ubmVjdCgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2FmZVNlcmlhbGl6ZSggZW52ZWxvcGUgKSB7XG5cdGZvciAoIGxldCBbIGtleSwgdmFsIF0gb2YgZW50cmllcyggZW52ZWxvcGUgKSApIHtcblx0XHRpZiAoIHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIiApIHtcblx0XHRcdGRlbGV0ZSBlbnZlbG9wZVsga2V5IF07XG5cdFx0fVxuXHRcdGlmICggXy5pc1BsYWluT2JqZWN0KCB2YWwgKSApIHtcblx0XHRcdHNhZmVTZXJpYWxpemUoIHZhbCApO1xuXHRcdH1cblx0XHRpZiAoIF8uaXNBcnJheSggdmFsICkgKSB7XG5cdFx0XHRfLmVhY2goIHZhbCwgc2FmZVNlcmlhbGl6ZSApO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZW52ZWxvcGU7XG59XG5cbmV4cG9ydCB2YXIgZW50cmllcyA9IGZ1bmN0aW9uKiAoIG9iaiApIHtcblx0aWYgKCBbIFwib2JqZWN0XCIsIFwiZnVuY3Rpb25cIiBdLmluZGV4T2YoIHR5cGVvZiBvYmogKSA9PT0gLTEgKSB7XG5cdFx0b2JqID0ge307XG5cdH1cblx0Zm9yICggdmFyIGsgb2YgT2JqZWN0LmtleXMoIG9iaiApICkge1xuXHRcdHlpZWxkIFsgaywgb2JqWyBrIF0gXTtcblx0fVxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3V0aWxzLmpzXG4gKiovIiwiaW1wb3J0IF8gZnJvbSBcImxvZGFzaFwiO1xuXG5leHBvcnQgbGV0IGVudiA9IHtcblx0b3JpZ2luOiBsb2NhdGlvbi5vcmlnaW4gfHwgbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0LFxuXHRpc1dvcmtlcjogKCB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiICkgJiYgcG9zdE1lc3NhZ2UgJiYgbG9jYXRpb24sXG5cdC8vIEkga25vdywgSSBLTk9XLiBUaGUgYWx0ZXJuYXRpdmUgd2FzIHZlcnkgZXhwZW5zaXZlIHBlcmYgJiB0aW1lLXdpc2Vcblx0Ly8gc28gSSBzYXZlZCB5b3UgYSBwZXJmIGhpdCBieSBjaGVja2luZyB0aGUgc3RpbmtpbmcgVUEuIFNpZ2guXG5cdC8vIEkgc291Z2h0IHRoZSBvcGluaW9uIG9mIHNldmVyYWwgb3RoZXIgZGV2cy4gV2UgYWxsIHRyYXZlbGVkXG5cdC8vIHRvIHRoZSBmYXIgZWFzdCB0byBjb25zdWx0IHdpdGggdGhlIHdpc2RvbSBvZiBhIG1vbmsgLSB0dXJuc1xuXHQvLyBvdXQgaGUgZGlkblwidCBrbm93IEphdmFTY3JpcHQsIGFuZCBvdXIgcGFzc3BvcnRzIHdlcmUgc3RvbGVuIG9uIHRoZVxuXHQvLyByZXR1cm4gdHJpcC4gV2Ugc3Rvd2VkIGF3YXkgYWJvYXJkIGEgZnJlaWdodGVyIGhlYWRlZCBiYWNrIHRvIHRoZVxuXHQvLyBVUyBhbmQgYnkgdGhlIHRpbWUgd2UgZ290IGJhY2ssIG5vIG9uZSBoYWQgaGVhcmQgb2YgSUUgOCBvciA5LiBUcnVlIHN0b3J5LlxuXHR1c2VFYWdlclNlcmlhbGl6ZTogL01TSUUgWzgsOV0vLnRlc3QoIG5hdmlnYXRvci51c2VyQWdlbnQgKVxufTtcblxuY29uc3QgZGVmYXVsdHMgPSB7XG5cdGFsbG93ZWRPcmlnaW5zOiBbIGVudi5vcmlnaW4gXSxcblx0ZW5hYmxlZDogdHJ1ZSxcblx0ZGVmYXVsdE9yaWdpblVybDogXCIqXCIsXG5cdHNhZmVTZXJpYWxpemU6IGZhbHNlXG59O1xuXG5leHBvcnQgbGV0IHN0YXRlID0ge1xuXHR3b3JrZXJzOiBbXSxcblx0Y29uZmlnOiBfLmV4dGVuZCgge30sIGRlZmF1bHRzICksXG5cdGRlZmF1bHRzXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvc3RhdGUuanNcbiAqKi8iLCJpbXBvcnQgcG9zdGFsIGZyb20gXCJwb3N0YWxcIjtcbmltcG9ydCBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCB7IHN0YXRlLCBlbnYgfSBmcm9tIFwiLi9zdGF0ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBYRnJhbWVDbGllbnQgZXh0ZW5kcyBwb3N0YWwuZmVkeC5GZWRlcmF0aW9uQ2xpZW50IHtcblxuXHRjb25zdHJ1Y3RvciggLi4uYXJncyApIHtcblx0XHR0aGlzLnRyYW5zcG9ydE5hbWUgPSBcInhmcmFtZVwiO1xuXHRcdHN1cGVyKCAuLi5hcmdzICk7XG5cdH1cblxuXHRzaG91bGRQcm9jZXNzKCkge1xuXHRcdGNvbnN0IGhhc0RvbWFpbkZpbHRlcnMgPSAhIXN0YXRlLmNvbmZpZy5hbGxvd2VkT3JpZ2lucy5sZW5ndGg7XG5cdFx0cmV0dXJuIHN0YXRlLmNvbmZpZy5lbmFibGVkICYmXG5cdFx0XHQvLyBhbm90aGVyIGZyYW1lL3dpbmRvd1xuXHRcdFx0KCAoIHRoaXMub3B0aW9ucy5vcmlnaW4gPT09IFwiKlwiIHx8ICggaGFzRG9tYWluRmlsdGVycyAmJiBfLmNvbnRhaW5zKCBzdGF0ZS5jb25maWcuYWxsb3dlZE9yaWdpbnMsIHRoaXMub3B0aW9ucy5vcmlnaW4gKSB8fCAhaGFzRG9tYWluRmlsdGVycyApICkgfHxcblx0XHRcdC8vIHdvcmtlclxuXHRcdFx0KCB0aGlzLm9wdGlvbnMuaXNXb3JrZXIgJiYgXy5jb250YWlucyggc3RhdGUud29ya2VycywgdGhpcy50YXJnZXQgKSApIHx8XG5cdFx0XHQvLyB3ZSBhcmUgaW4gYSB3b3JrZXJcblx0XHRcdGVudi5pc1dvcmtlciApO1xuXHR9XG5cblx0c2VuZCggcGFja2luZ1NsaXAgKSB7XG5cdFx0aWYgKCB0aGlzLnNob3VsZFByb2Nlc3MoKSApIHtcblx0XHRcdGNvbnN0IGNvbnRleHQgPSBlbnYuaXNXb3JrZXIgPyBudWxsIDogdGhpcy50YXJnZXQ7XG5cdFx0XHRjb25zdCBhcmdzID0gWyBwb3N0YWwuZmVkeC50cmFuc3BvcnRzLnhmcmFtZS53cmFwRm9yVHJhbnNwb3J0KCBwYWNraW5nU2xpcCApIF07XG5cdFx0XHRpZiAoICF0aGlzLm9wdGlvbnMuaXNXb3JrZXIgJiYgIWVudi5pc1dvcmtlciApIHtcblx0XHRcdFx0YXJncy5wdXNoKCB0aGlzLm9wdGlvbnMub3JpZ2luICk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICFlbnYuaXNXb3JrZXIgKSB7XG5cdFx0XHRcdGlmICggYXJncy5sZW5ndGggPT09IDEgKSB7XG5cdFx0XHRcdFx0dGhpcy50YXJnZXQucG9zdE1lc3NhZ2UoIGFyZ3NbMF0gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLnRhcmdldC5wb3N0TWVzc2FnZSggYXJnc1swXSwgYXJnc1sxXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnRhcmdldC5wb3N0TWVzc2FnZS5hcHBseSggY29udGV4dCwgYXJncyApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvWEZyYW1lQ2xpZW50LmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ=="," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 651a4bee1487dcac605a\n **/","import _ from \"lodash\";\nimport postal from \"postal\";\nimport {\n\t_memoRemoteByInstanceId,\n\t_memoRemoteByTarget,\n\t_disconnectClient,\n\tsafeSerialize\n} from \"./utils\";\nimport { state, env } from \"./state\";\nimport XFrameClient from \"./XFrameClient\";\n\nfunction listener() {\n\tplugin.routeMessage.apply( plugin, arguments );\n}\n\nfunction listenToWorker( worker ) {\n\tif ( !_.include( state.workers, worker ) ) {\n\t\tworker.addEventListener( \"message\", listener );\n\t\tstate.workers.push( worker );\n\t}\n}\n\nXFrameClient.getInstance = function getInstance( source, origin, instanceId ) {\n\tconst client = new XFrameClient( source, {\n\t\torigin: origin,\n\t\tisWorker: ( typeof Worker !== \"undefined\" && source instanceof Worker )\n\t}, instanceId );\n\tif ( client.options.isWorker ) {\n\t\tlistenToWorker( client.target );\n\t}\n\treturn client;\n};\n\nconst NO_OP = function() {};\n\nconst plugin = postal.fedx.transports.xframe = {\n\teagerSerialize: env.useEagerSerialize,\n\tXFrameClient: XFrameClient,\n\tconfigure: function( cfg ) {\n\t\tif ( cfg ) {\n\t\t\tstate.config = _.defaults( _.extend( state.config, cfg ), state.defaults );\n\t\t}\n\t\treturn state.config;\n\t},\n\tclearConfiguration: function() {\n\t\tstate.config = _.extend( {}, state.defaults );\n\t},\n\t//find all iFrames and the parent window if in an iframe\n\tgetTargets: env.isWorker ? function() {\n\t\treturn [ {\n\t\t\ttarget: {\n\t\t\t\tpostMessage: postMessage\n\t\t\t}\n\t\t} ]; // TO-DO: look into this...\n\t} : function() {\n\t\tconst targets = _.map( document.getElementsByTagName( \"iframe\" ), function( i ) {\n\t\t\tvar urlHack = document.createElement( \"a\" );\n\t\t\turlHack.href = i.src;\n\t\t\tlet origin = urlHack.protocol + \"//\" + urlHack.host;\n\t\t\t// The following condition fixes the IE issue of setting the origin while the iframe is 'empty':\n\t\t\t// if the iframe has no 'src' set to some meaningful url (at this very moment),\n\t\t\t// then the urlHack returns neither protocol nor host information.\n\t\t\tif ( origin === \"//\" ) {\n\t\t\t\torigin = null;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttarget: i.contentWindow,\n\t\t\t\torigin: origin || state.config.defaultOriginUrl\n\t\t\t};\n\t\t} );\n\t\tif ( window.parent && window.parent !== window ) {\n\t\t\ttargets.push( {\n\t\t\t\ttarget: window.parent,\n\t\t\t\torigin: \"*\"\n\t\t\t} );\n\t\t}\n\t\treturn targets.concat( state.workers );\n\t},\n\tremotes: [],\n\twrapForTransport: env.useEagerSerialize ? function( packingSlip ) {\n\t\treturn JSON.stringify( {\n\t\t\tpostal: true,\n\t\t\tpackingSlip: packingSlip\n\t\t} );\n\t} : function( packingSlip ) {\n\t\treturn {\n\t\t\tpostal: true,\n\t\t\tpackingSlip: packingSlip\n\t\t};\n\t},\n\tunwrapFromTransport: function( msgData ) {\n\t\tif ( typeof msgData === \"string\" && ( env.useEagerSerialize || msgData.indexOf( '\"postal\":true' ) !== -1 ) ) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse( msgData );\n\t\t\t} catch ( ex ) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t} else {\n\t\t\treturn msgData;\n\t\t}\n\t},\n\trouteMessage: function( event ) {\n\t\t// source = remote window or worker?\n\t\tconst source = event.source || event.currentTarget;\n\t\tconst parsed = this.unwrapFromTransport( event.data );\n\t\tif ( parsed.postal ) {\n\t\t\tvar remote = _.find( this.remotes, function( x ) {\n\t\t\t\treturn x.target === source;\n\t\t\t} );\n\t\t\tif ( !remote ) {\n\t\t\t\tremote = XFrameClient.getInstance( source, event.origin, parsed.packingSlip.instanceId );\n\t\t\t\tthis.remotes.push( remote );\n\t\t\t}\n\t\t\tremote.onMessage( parsed.packingSlip );\n\t\t}\n\t},\n\tsendMessage: function( env ) {\n\t\tlet envelope = env;\n\t\tif ( state.config.safeSerialize ) {\n\t\t\tenvelope = safeSerialize( _.cloneDeep( env ) );\n\t\t}\n\t\t_.each( this.remotes, function( remote ) {\n\t\t\tremote.sendMessage( envelope );\n\t\t} );\n\t},\n\tdisconnect: function( options ) {\n\t\toptions = options || {};\n\t\tconst clients = options.instanceId ?\n\t\t\t// an instanceId value or array was provided, let's get the client proxy instances for the id(s)\n\t\t\t_.reduce( _.isArray( options.instanceId ) ? options.instanceId : [ options.instanceId ], _memoRemoteByInstanceId, [], this ) :\n\t\t\t// Ok so we don't have instanceId(s), let's try target(s)\n\t\t\toptions.target ?\n\t\t\t\t// Ok, so we have a targets array, we need to iterate over it and get a list of the proxy/client instances\n\t\t\t\t_.reduce( _.isArray( options.target ) ? options.target : [ options.target ], _memoRemoteByTarget, [], this ) :\n\t\t\t\t// aww, heck - we don't have instanceId(s) or target(s), so it's ALL THE REMOTES\n\t\t\t\tthis.remotes;\n\t\tif ( !options.doNotNotify ) {\n\t\t\t_.each( clients, _disconnectClient, this );\n\t\t}\n\t\tthis.remotes = _.without.apply( null, [ this.remotes ].concat( clients ) );\n\t},\n\tsignalReady: function( targets, callback ) {\n\t\ttargets = _.isArray( targets ) ? targets : [ targets ];\n\t\ttargets = targets.length ? targets : this.getTargets();\n\t\tcallback = callback || NO_OP;\n\t\t_.each( targets, function( def ) {\n\t\t\tif ( def.target ) {\n\t\t\t\tdef.origin = def.origin || state.config.defaultOriginUrl;\n\t\t\t\tlet remote = _.find( this.remotes, function( x ) {\n\t\t\t\t\treturn x.target === def.target;\n\t\t\t\t} );\n\t\t\t\tif ( !remote ) {\n\t\t\t\t\tremote = XFrameClient.getInstance( def.target, def.origin );\n\t\t\t\t\tthis.remotes.push( remote );\n\t\t\t\t}\n\t\t\t\tremote.sendPing( callback );\n\t\t\t}\n\t\t}, this );\n\t},\n\taddEventListener: env.isWorker ? function() {\n\t\taddEventListener( \"message\", listener );\n\t} : function( eventName, handler, bubble ) {\n\t\t// in normal browser context\n\t\tif ( typeof window !== \"undefined\" && typeof window.addEventListener === \"function\" ) {\n\t\t\twindow.addEventListener( eventName, handler, bubble );\n\t\t} else {\n\t\t\tthrow new Error( \"postal.xframe only works with browsers that support window.addEventListener\" );\n\t\t}\n\t},\n\tlistenToWorker: listenToWorker,\n\tstopListeningToWorker: function( worker ) {\n\t\tif ( worker ) {\n\t\t\tworker.removeEventListener( \"message\", listener );\n\t\t\tstate.workers = _.without( state.workers, worker );\n\t\t} else {\n\t\t\twhile ( state.workers.length ) {\n\t\t\t\tstate.workers.pop().removeEventListener( \"message\", listener );\n\t\t\t}\n\t\t}\n\t}\n};\n\nplugin.addEventListener( \"message\", listener, false );\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"postal\"\n ** module id = 2\n ** module chunks = 0\n **/","import _ from \"lodash\";\n\nexport function _memoRemoteByInstanceId( memo, instanceId ) {\n\tvar proxy = _.find( this.remotes, function( x ) {\n\t\treturn x.instanceId === instanceId;\n\t} );\n\tif ( proxy ) {\n\t\tmemo.push( proxy );\n\t}\n\treturn memo;\n}\n\nexport function _memoRemoteByTarget( memo, tgt ) {\n\tvar proxy = _.find( this.remotes, function( x ) {\n\t\treturn x.target === tgt;\n\t} );\n\tif ( proxy ) {\n\t\tmemo.push( proxy );\n\t}\n\treturn memo;\n}\n\nexport function _disconnectClient( client ) {\n\tclient.disconnect();\n}\n\nexport function safeSerialize( envelope ) {\n\tfor ( let [ key, val ] of entries( envelope ) ) {\n\t\tif ( typeof val === \"function\" ) {\n\t\t\tdelete envelope[ key ];\n\t\t}\n\t\tif ( _.isPlainObject( val ) ) {\n\t\t\tsafeSerialize( val );\n\t\t}\n\t\tif ( _.isArray( val ) ) {\n\t\t\t_.each( val, safeSerialize );\n\t\t}\n\t}\n\treturn envelope;\n}\n\nexport var entries = function* ( obj ) {\n\tif ( [ \"object\", \"function\" ].indexOf( typeof obj ) === -1 ) {\n\t\tobj = {};\n\t}\n\tfor ( var k of Object.keys( obj ) ) {\n\t\tyield [ k, obj[ k ] ];\n\t}\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","import _ from \"lodash\";\n\nexport let env = {\n\torigin: location.origin || location.protocol + \"//\" + location.host,\n\tisWorker: ( typeof window === \"undefined\" ) && postMessage && location,\n\t// I know, I KNOW. The alternative was very expensive perf & time-wise\n\t// so I saved you a perf hit by checking the stinking UA. Sigh.\n\t// I sought the opinion of several other devs. We all traveled\n\t// to the far east to consult with the wisdom of a monk - turns\n\t// out he didn\"t know JavaScript, and our passports were stolen on the\n\t// return trip. We stowed away aboard a freighter headed back to the\n\t// US and by the time we got back, no one had heard of IE 8 or 9. True story.\n\tuseEagerSerialize: /MSIE [8,9]/.test( navigator.userAgent )\n};\n\nconst defaults = {\n\tallowedOrigins: [ env.origin ],\n\tenabled: true,\n\tdefaultOriginUrl: \"*\",\n\tsafeSerialize: false\n};\n\nexport let state = {\n\tworkers: [],\n\tconfig: _.extend( {}, defaults ),\n\tdefaults\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/state.js\n **/","import postal from \"postal\";\nimport _ from \"lodash\";\nimport { state, env } from \"./state\";\n\nexport default class XFrameClient extends postal.fedx.FederationClient {\n\n\tconstructor( ...args ) {\n\t\tthis.transportName = \"xframe\";\n\t\tsuper( ...args );\n\t}\n\n\tshouldProcess() {\n\t\tconst hasDomainFilters = !!state.config.allowedOrigins.length;\n\t\treturn state.config.enabled &&\n\t\t\t// another frame/window\n\t\t\t( ( this.options.origin === \"*\" || ( hasDomainFilters && _.contains( state.config.allowedOrigins, this.options.origin ) || !hasDomainFilters ) ) ||\n\t\t\t// worker\n\t\t\t( this.options.isWorker && _.contains( state.workers, this.target ) ) ||\n\t\t\t// we are in a worker\n\t\t\tenv.isWorker );\n\t}\n\n\tsend( packingSlip ) {\n\t\tif ( this.shouldProcess() ) {\n\t\t\tconst context = env.isWorker ? null : this.target;\n\t\t\tconst args = [ postal.fedx.transports.xframe.wrapForTransport( packingSlip ) ];\n\t\t\tif ( !this.options.isWorker && !env.isWorker ) {\n\t\t\t\targs.push( this.options.origin );\n\t\t\t}\n\t\t\tif ( !env.isWorker ) {\n\t\t\t\tif ( args.length === 1 ) {\n\t\t\t\t\tthis.target.postMessage( args[0] );\n\t\t\t\t} else {\n\t\t\t\t\tthis.target.postMessage( args[0], args[1] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.target.postMessage.apply( context, args );\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/XFrameClient.js\n **/"],"sourceRoot":"/source/"}